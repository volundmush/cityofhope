@skip isdbref(tag(setr(1,cleanup)))={@assert/inline isdbref(tag(stor))=@pemit %#=ERROR: No storage object installed!;@assert/inline isdbref(setr(0,create(Periodic Cleanup Triggers,,t)))=@pemit %#=ERROR: Could not create code object: %q0;@set %q0=INDESTRUCTIBLE NO_COMMAND;@tag/add %q1=%q0;@tel %q1=#stor}

&META_AUTHOR #cleanup=Sponge/#4
&META_PURPOSE #cleanup=Regularly scheduled triggers that perform some cleanup functions. Triggers named TRIG_DAILY_* and TRIG_WEEKLY_* will be triggered automatically on those time scales.
&META_UPDATED_BY #cleanup=Sponge/#4

&LIST_RESTRICTED_REALITIES #cleanup=FAE WRAITH UMBRA
&TRIG_DAILY_LOCKS_INVALID #cleanup=@trigger #31/TRIG_CLEANUP_INVALID_LOCKS
&TRIG_ALL_DAILIES #cleanup=@dolist lattr(me/TRIG_DAILY_*)=@trigger me/##
&UFUN_PLAYER_UNSTARTED #cleanup=candbool(not(u(UFUN_PLAYER_PRESERVE,%0)),gt(sub(secs(),convtime(get(%0/last))),v(DATA_UNSTARTED_AGE)),not(u(#dataman/UFUN_GET_BASE_STAT,%0,RACE)))
&DATA_UNSTARTED_AGE #cleanup=1209600
&UFUN_PLAYER_PRESERVE #cleanup=corbool(hasflag(%0,CONNECTED),hasflag(%0,GOING),haspower(%0,guest),isstaff(%0),t(get(%0/_PRESERVE)),gt(get(%0/_VACATION_UNTIL),secs()))
&DB_INCINERATOR #cleanup=#1328
&TRIG_CLEAN_UNSTARTED_PLAYER #cleanup=@name %0=UnstartedPlayer[edit(%0,#,)];@tel %0=[v(DB_INCINERATOR)];@destroy/override %0
&UFUN_PLAYERS_UNSTARTED #cleanup=search(EPLAYER=u(UFUN_PLAYER_UNSTARTED,##))
&TRIG_CLEAN_UNSTARTED_PLAYERS #cleanup=@dolist [u(UFUN_PLAYERS_UNSTARTED)]=@trigger me/TRIG_CLEAN_UNSTARTED_PLAYER=##
&TRIG_DAILY_ALTS #cleanup=@trigger #8046/TRIG_ALTS_CLEANUP
&TRIG_DAILY_UNSTARTED_PLAYERS #cleanup=@trigger me/TRIG_CLEAN_UNSTARTED_PLAYER